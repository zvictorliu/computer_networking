---
title: 第五章 传输层
type: docs
weight: 5
---

# 传输层

> 面向通信的最高层，面向用户功能的最底层

物理层-数据链路层-网络层实现到主机的连接

但是通信实体是进程（多种应用都有通信需求），这叫端到端连接，通过端口区分

## 功能

其功能主要包括：

- 端到端通信：连接的是应用进程
- 复用和分用：~~还不懂~~
- 对收到报文进行差错检查
- 能同时提供两种传输协议

对应用进程来说看到的是两个传输层实体间具有一条端到端的逻辑通信信道，而中间经历了什么（比如路由）都不管

这个图比较形象：

<img src="https://cdn.jsdelivr.net/gh/zvictorliu/typoraPics@main/img/image-20230613214447009.png" alt="image-20230613214447009" style="zoom:60%;" />

## 寻址

端口：连接传输层和应用层，用端口号标识主机中的应用进程

- 服务器端：
  - 熟知端口号：{{<katex>}}0 \sim 2^{10}-1{{</katex>}}，所有应用进程都知道
    - 比如 FTP，HTTP这些程序都有固定的端口号
  - 登记端口号：{{<katex>}}2^{10} \sim 49151{{</katex>}}
    - 需要在`IANA`登记

- 客户端：{{<katex>}}49151 \sim 2^{16}-1{{</katex>}}
  - 客户进程运行时才动态选择，是临时的，通信结束被释放，并不专属于某个程序



套接字：

端口号用以区分主机内的不同进程，而IP地址区分不同主机

套接字就是IP地址+端口号

A向B通信时也是把自己的源端口号一起发过去的

## 无连接与面向连接概念

面向连接：建立连接-通信-释放连接，可靠

无连接：告诉目标地址，发到网络上自生自灭，所以是不可靠的

`TCP/IP`协议族中：

- TCP：面向连接
  - 开销比较大
- UDP：无连接
  - 收到报文后无需返回确认信息