---
title: 文件传输协议
type: docs
weight: 3
---

# 文件传输协议

客户向服务器建立两个并行的TCP连接：

- 控制连接：21号端口
- 数据连接：20号端口

服务器持续监听21号端口，等等客户连接，会话期间一直打开

服务器上主进程负责接收请求，子进程负责处理单个请求

控制进程接到请求后创建数据传送进程和数据连接



两种数据传输模式：

- 主动模式：PORT
  - 客户端和服务器连接后，客户端自己开发一个端口，将端口号和PORT命令发送给服务器，服务器于是将20号端口和这个端口建立数据连接
- 被动模式：PASV
  - 服务器收到PASV命令后，随机开放一个端口并告知客户端，客户端与之建立数据连接



FTP修改服务器上文件：

- 先读回来，修改后再传上去

网络文件系统：

- 能够远程操控，只复制一个小片段回来修改然后安装上去